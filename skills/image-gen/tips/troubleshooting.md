# 常见问题排查

## 问题诊断与解决方案

### 1. 文字显示错误

**症状**：中文文字变成乱码或错别字

**解决方案**：
1. 使用图生图模式精确修正单个字
2. 参考 `chinese-text.md` 的提示词模板
3. 最多尝试 3 次，每次只改一个字

### 2. 风格偏差

**症状**：生成的图片风格与预期不符

**解决方案**：
1. 添加更具体的风格关键词（参考 `style-guide.md`）
2. 提供参考图片使用图生图模式
3. 明确说明"不要XXX风格"

### 3. 内容缺失或多余

**症状**：缺少关键元素或出现不需要的内容

**解决方案**：
1. 列举所有必须包含的元素
2. 明确说明不需要的元素
3. 分步骤生成，先主体后细节

### 4. 画面模糊或变形

**症状**：图片质量低，人物/物体变形

**解决方案**：
1. 添加质量增强词：`high quality, detailed, 4K`
2. 使用更大的尺寸参数
3. 简化提示词，减少元素数量

### 5. API 调用失败

**症状**：返回错误或空结果

**检查项**：
1. API Key 是否正确配置
2. 账户余额是否充足
3. 网络连接是否正常
4. 请求参数格式是否正确

## 自动修正决策树

```
生成图片
    ↓
检查结果
    ↓
┌─────────────────────────────────────┐
│ 符合要求？                           │
├─────────────────────────────────────┤
│ 是 → 返回结果，记录成功经验           │
│ 否 → 识别问题类型                     │
│      ↓                              │
│      ├─ 文字错误 → 图生图精确修正     │
│      ├─ 风格偏差 → 优化关键词重生成   │
│      ├─ 内容问题 → 调整描述重生成     │
│      └─ 质量问题 → 增强参数重生成     │
│      ↓                              │
│      重试次数 < 3？                  │
│      ├─ 是 → 返回修正流程            │
│      └─ 否 → 返回当前最佳结果，       │
│              说明问题并请用户指导     │
└─────────────────────────────────────┘
```

## 经验沉淀

每次成功解决问题后：
1. 记录有效的提示词到对应的 tips 文件
2. 记录失败的尝试，避免重复
3. 总结规律，更新方法论
